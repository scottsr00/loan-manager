<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="4" failures="4" errors="0" time="0.726">
  <testsuite name="Facility Position History Integration" errors="0" failures="4" skipped="0" timestamp="2025-01-04T00:07:00" time="0.327" tests="4">
    <testcase classname="Facility Position History Integration Trade Flow should create position history records when closing a trade" name="Facility Position History Integration Trade Flow should create position history records when closing a trade" time="0.018">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;positions&apos;)
    at positions (/Users/stephenscott/Dev/Apps/Loans-v0/loans-v2/server/actions/trade/closeTrade.ts:40:45)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at closeTrade (/Users/stephenscott/Dev/Apps/Loans-v0/loans-v2/server/actions/trade/closeTrade.ts:30:5)
    at Object.&lt;anonymous&gt; (/Users/stephenscott/Dev/Apps/Loans-v0/loans-v2/__tests__/integration/facilityPositionHistory.integration.test.ts:284:7)</failure>
    </testcase>
    <testcase classname="Facility Position History Integration Trade Flow should update position shares correctly" name="Facility Position History Integration Trade Flow should update position shares correctly" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;positions&apos;)
    at positions (/Users/stephenscott/Dev/Apps/Loans-v0/loans-v2/server/actions/trade/closeTrade.ts:40:45)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at closeTrade (/Users/stephenscott/Dev/Apps/Loans-v0/loans-v2/server/actions/trade/closeTrade.ts:30:5)
    at Object.&lt;anonymous&gt; (/Users/stephenscott/Dev/Apps/Loans-v0/loans-v2/__tests__/integration/facilityPositionHistory.integration.test.ts:327:7)</failure>
    </testcase>
    <testcase classname="Facility Position History Integration Manual Position Updates should create position history record for manual updates" name="Facility Position History Integration Manual Position Updates should create position history record for manual updates" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 800000
Received: 1000000
    at Object.toBe (/Users/stephenscott/Dev/Apps/Loans-v0/loans-v2/__tests__/integration/facilityPositionHistory.integration.test.ts:414:41)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Facility Position History Integration History Retrieval should filter history by date range" name="Facility Position History Integration History Retrieval should filter history by date range" time="0.001">
      <failure>Error: expect(received).toBeLessThanOrEqual(expected)

Expected: &lt;= 1706659200000
Received:    1735949221004
    at toBeLessThanOrEqual (/Users/stephenscott/Dev/Apps/Loans-v0/loans-v2/__tests__/integration/facilityPositionHistory.integration.test.ts:490:49)
    at Array.forEach (&lt;anonymous&gt;)
    at Object.forEach (/Users/stephenscott/Dev/Apps/Loans-v0/loans-v2/__tests__/integration/facilityPositionHistory.integration.test.ts:488:15)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
</testsuites>